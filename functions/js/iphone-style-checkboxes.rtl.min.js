(function(f){(function(){var m=[].slice;var l=function(){function b(a,c){var e;this.elem=f(a);var d=f.extend({},b.defaults,c);for(e in d){var h=d[e];this[e]=h}this.elem.data(this.dataName,this);this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();this.calculateDimensions()}b.prototype.calculateDimensions=function(){this.resizeHandle&&this.optionallyResize("handle");this.resizeContainer&&this.optionallyResize("container");return this.initialPosition()};b.prototype.isDisabled=
function(){return this.elem.is(":disabled")?!0:"true"==this.elem.attr("checkbox-disabled")?!0:!1};b.prototype.wrapCheckboxWithDivs=function(){this.elem.wrap("<div class='"+this.containerClass+"' />");this.container=this.elem.parent();this.offLabel=f("<label class='"+this.labelOffClass+"'>\n  <span>"+this.uncheckedLabel+"</span>\n</label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=f("<label class='"+this.labelOnClass+"'>\n  <span>"+this.checkedLabel+"</span>\n</label>").appendTo(this.container);
this.onSpan=this.onLabel.children("span");return this.handle=f("<div class='"+this.handleClass+"'>\n  <div class='"+this.handleRightClass+"'>\n    <div class='"+this.handleCenterClass+"'>\n  </div>\n</div>").appendTo(this.container).before("<span class='iPhoneCheckBeforeContainer'>&nbsp;</span><span class='iPhoneCheckAfterContainer'>&nbsp;</span>")};b.prototype.disableTextSelection=function(){return f([this.handle,this.offLabel,this.onLabel,this.container]).attr("unselectable","on")};b.prototype._getDimension=
function(a,c){return null!=f.fn.actual?a.actual(c):a[c]()};b.prototype.optionallyResize=function(a){var c=this.onLabel.find("span");var e=this._getDimension(c,"width");e+=parseInt(c.css("padding-right"),10);var d=this.offLabel.find("span");c=this._getDimension(d,"width");c+=parseInt(d.css("padding-left"),10);return"container"===a?(a=(e>c?e:c)+(this._getDimension(this.handle,"width")+this.handleMargin),!0===this.customWidth&&(a=this.containerWidth),this.container.css({width:a})):this.handle.css({width:e>
c?e:c})};b.prototype.onMouseDown=function(a){a.preventDefault();if(!this.isDisabled())return a=a.pageX||a.originalEvent.changedTouches[0].pageX,b.currentlyClicking=this.handle,b.dragStartPosition=a,b.handleLeftOffset=parseInt(this.handle.css("right"),10)||0};b.prototype.onDragMove=function(a,c){var e;if(b.currentlyClicking===this.handle){var d=(c+b.handleLeftOffset-b.dragStartPosition)/this.rightSide;0>d&&(d=0);1<d&&(d=1);var h=e=d*this.rightSide;0==h&&(h=-1);this.handle.css({right:h});this.onLabel.css({width:e+
this.handleRadius});this.offSpan.css({marginLeft:-e});return this.onSpan.css({marginRight:-(1-d)*this.rightSide})}};b.prototype.onDragEnd=function(a,c){if(b.currentlyClicking===this.handle&&!this.isDisabled()){if(b.dragging){var e=(c-b.dragStartPosition)/this.rightSide;this.elem.prop("checked",.5<=e)}else this.elem.prop("checked",!this.elem.prop("checked"));b.currentlyClicking=null;b.dragging=null;return this.didChange()}};b.prototype.refresh=function(){return this.didChange()};b.prototype.didChange=
function(){var a;if("function"===typeof this.onChange)this.onChange(this.elem,this.elem.prop("checked"));if(this.isDisabled())return this.container.addClass(this.disabledClass),!1;this.container.removeClass(this.disabledClass);var c=a=this.elem.prop("checked")?this.rightSide:0;0==c&&(c=-1);this.handle.animate({right:c},this.duration);this.onLabel.animate({width:a+this.handleRadius},this.duration);this.offSpan.animate({marginLeft:-a},this.duration);this.onSpan.animate({marginRight:a-this.rightSide},
this.duration);if("function"===typeof this.onEnd)this.onEnd(this.elem,this.elem.prop("checked"));return!0};b.prototype.attachEvents=function(){var a=this;var c=function(d){return a.onGlobalMove.apply(a,arguments)};var e=function(d){a.onGlobalUp.apply(a,arguments);f(document).off("mousemove touchmove",c);return f(document).off("mouseup touchend",e)};this.elem.on("change",function(){return a.refresh()});return this.container.on("mousedown touchstart",function(d){a.onMouseDown.apply(a,arguments);f(document).on("mousemove touchmove",
c);return f(document).on("mouseup touchend",e)})};b.prototype.initialPosition=function(){var a=this._getDimension(this.container,"width");this.offLabel.css({width:a-this.containerRadius-16});var c=this.containerRadius+1;a=this.rightSide=a-this._getDimension(this.handle,"width")-c;0==a&&(a=-1);this.elem.is(":checked")?(this.handle.css({right:a}),this.onLabel.css({width:this.rightSide+this.handleRadius}),this.offSpan.css({marginLeft:-this.rightSide})):(this.onLabel.css({width:this.handleRadius}),this.onSpan.css({marginRight:-this.rightSide}));
if(this.isDisabled())return this.container.addClass(this.disabledClass)};b.prototype.onGlobalMove=function(a){if(!this.isDisabled()&&b.currentlyClicking){a.preventDefault();var c=a.pageX||a.originalEvent.changedTouches[0].pageX;!b.dragging&&Math.abs(b.dragStartPosition-c)>this.dragThreshold&&(b.dragging=!0);return this.onDragMove(a,c)}};b.prototype.onGlobalUp=function(a){if(b.currentlyClicking)return a.preventDefault(),this.onDragEnd(a,a.pageX||a.originalEvent.changedTouches[0].pageX),!1};b.defaults=
{customWidth:!1,containerWidth:80,duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iphoneStyle",onChange:function(){},onEnd:function(){}};
return b}();f.iphoneStyle=this.iOSCheckbox=l;f.fn.iphoneStyle=function(){var b,a,c,e;var d=1<=arguments.length?m.call(arguments,0):[];var h=null!=(b=null!=(a=d[0])?a.dataName:void 0)?b:l.defaults.dataName;var k=this.filter(":checkbox");a=0;for(c=k.length;a<c;a++){var g=k[a];b=f(g).data(h);if(null!=b){g=d[0];var n=2<=d.length?m.call(d,1):[];null!=(e=b[g])&&e.apply(b,n)}else new l(g,d[0])}k=this.filter(":radio");a=0;for(c=k.length;a<c;a++)g=k[a],b=f(g).data(h),null!=b?(g=d[0],n=2<=d.length?m.call(d,
1):[],null!=(e=b[g])&&e.apply(b,n)):new l(g,d[0]);return this};f.fn.iOSCheckbox=function(b){null==b&&(b={});b=f.extend({},b,{customWidth:!1,containerWidth:80,resizeHandle:!1,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer",labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"});return this.iphoneStyle(b)}}).call(this)})(jQuery);