!function(a){(function(){var b,e=[].slice;b=function(){function b(c,d){var e,f,g;this.elem=a(c),f=a.extend({},b.defaults,d);for(e in f)g=f[e],this[e]=g;this.elem.data(this.dataName,this),this.wrapCheckboxWithDivs(),this.attachEvents(),this.disableTextSelection(),this.calculateDimensions()}return b.prototype.calculateDimensions=function(){return this.resizeHandle&&this.optionallyResize("handle"),this.resizeContainer&&this.optionallyResize("container"),this.initialPosition()},b.prototype.isDisabled=function(){return this.elem.is(":disabled")?!0:"true"==this.elem.attr("checkbox-disabled")?!0:!1},b.prototype.wrapCheckboxWithDivs=function(){return this.elem.wrap("<div class='"+this.containerClass+"' />"),this.container=this.elem.parent(),this.offLabel=a("<label class='"+this.labelOffClass+"'>\n  <span>"+this.uncheckedLabel+"</span>\n</label>").appendTo(this.container),this.offSpan=this.offLabel.children("span"),this.onLabel=a("<label class='"+this.labelOnClass+"'>\n  <span>"+this.checkedLabel+"</span>\n</label>").appendTo(this.container),this.onSpan=this.onLabel.children("span"),this.handle=a("<div class='"+this.handleClass+"'>\n  <div class='"+this.handleRightClass+"'>\n    <div class='"+this.handleCenterClass+"' />\n  </div>\n</div>").appendTo(this.container).before("<span class='iPhoneCheckBeforeContainer'>&nbsp;</span><span class='iPhoneCheckAfterContainer'>&nbsp;</span>")},b.prototype.disableTextSelection=function(){return navigator.userAgent.match("MSIE")?a([this.handle,this.offLabel,this.onLabel,this.container]).attr("unselectable","on"):void 0},b.prototype._getDimension=function(b,c){return null!=a.fn.actual?b.actual(c):b[c]()},b.prototype.optionallyResize=function(a){var b,c,d,e,f;return f=this.onLabel.find("span"),e=this._getDimension(f,"width"),e+=parseInt(f.css("padding-right"),10),d=this.offLabel.find("span"),c=this._getDimension(d,"width"),c+=parseInt(d.css("padding-left"),10),"container"===a?(b=e>c?e:c,b+=this._getDimension(this.handle,"width")+this.handleMargin,this.container.css({width:this.containerWidth})):(b=e>c?e:c,this.handle.css({width:b}))},b.prototype.onMouseDown=function(a){var c;return a.preventDefault(),this.isDisabled()?void 0:(c=a.pageX||a.originalEvent.changedTouches[0].pageX,b.currentlyClicking=this.handle,b.dragStartPosition=c,b.handleLeftOffset=parseInt(this.handle.css("right"),10)||0)},b.prototype.onDragMove=function(a,c){var d,e,f;if(b.currentlyClicking===this.handle)return e=(c+b.handleLeftOffset-b.dragStartPosition)/this.rightSide,0>e&&(e=0),e>1&&(e=1),d=e*this.rightSide,f=d,0==f&&(f=-1),this.handle.css({right:f}),this.onLabel.css({width:d+this.handleRadius}),this.offSpan.css({marginLeft:-d}),this.onSpan.css({marginRight:-(1-e)*this.rightSide})},b.prototype.onDragEnd=function(a,c){var d;if(b.currentlyClicking===this.handle&&!this.isDisabled())return b.dragging?(d=(c-b.dragStartPosition)/this.rightSide,this.elem.prop("checked",d>=.5)):this.elem.prop("checked",!this.elem.prop("checked")),b.currentlyClicking=null,b.dragging=null,this.didChange()},b.prototype.refresh=function(){return this.didChange()},b.prototype.didChange=function(){var a,b;return"function"==typeof this.onChange&&this.onChange(this.elem,this.elem.prop("checked")),this.isDisabled()?(this.container.addClass(this.disabledClass),!1):(this.container.removeClass(this.disabledClass),a=this.elem.prop("checked")?this.rightSide:0,b=a,0==b&&(b=-1),this.handle.animate({right:b},this.duration),this.onLabel.animate({width:a+this.handleRadius},this.duration),this.offSpan.animate({marginLeft:-a},this.duration),this.onSpan.animate({marginRight:a-this.rightSide},this.duration),"function"==typeof this.onEnd&&this.onEnd(this.elem,this.elem.prop("checked")),!0)},b.prototype.attachEvents=function(){var b,c,d;return d=this,b=function(a){return d.onGlobalMove.apply(d,arguments)},c=function(e){return d.onGlobalUp.apply(d,arguments),a(document).unbind("mousemove touchmove",b),a(document).unbind("mouseup touchend",c)},this.elem.change(function(){return d.refresh()}),this.container.bind("mousedown touchstart",function(e){return d.onMouseDown.apply(d,arguments),a(document).bind("mousemove touchmove",b),a(document).bind("mouseup touchend",c)})},b.prototype.initialPosition=function(){var a,b,c;return a=this._getDimension(this.container,"width"),this.offLabel.css({width:a-this.containerRadius-16}),b=this.containerRadius+1,this.rightSide=a-this._getDimension(this.handle,"width")-b,c=this.rightSide,0==c&&(c=-1),this.elem.is(":checked")?(this.handle.css({right:c}),this.onLabel.css({width:this.rightSide+this.handleRadius}),this.offSpan.css({marginLeft:-this.rightSide})):(this.onLabel.css({width:this.handleRadius}),this.onSpan.css({marginRight:-this.rightSide})),this.isDisabled()?this.container.addClass(this.disabledClass):void 0},b.prototype.onGlobalMove=function(a){var c;if(!this.isDisabled()&&b.currentlyClicking)return a.preventDefault(),c=a.pageX||a.originalEvent.changedTouches[0].pageX,!b.dragging&&Math.abs(b.dragStartPosition-c)>this.dragThreshold&&(b.dragging=!0),this.onDragMove(a,c)},b.prototype.onGlobalUp=function(a){var c;if(b.currentlyClicking)return a.preventDefault(),c=a.pageX||a.originalEvent.changedTouches[0].pageX,this.onDragEnd(a,c),!1},b.defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",containerWidth:80,labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iphoneStyle",onChange:function(){},onEnd:function(){}},b}(),a.iphoneStyle=this.iOSCheckbox=b,a.fn.iphoneStyle=function(){var c,d,f,g,h,i,j,k,l,m,n,o,p;for(c=1<=arguments.length?e.call(arguments,0):[],f=null!=(l=null!=(m=c[0])?m.dataName:void 0)?l:b.defaults.dataName,n=this.filter(":checkbox"),j=0,k=n.length;k>j;j++)d=n[j],g=a(d).data(f),null!=g?(h=c[0],i=2<=c.length?e.call(c,1):[],null!=(o=g[h])&&o.apply(g,i)):new b(d,c[0]);for(p=this.filter(":radio"),j=0,k=p.length;k>j;j++)d=p[j],g=a(d).data(f),null!=g?(h=c[0],i=2<=c.length?e.call(c,1):[],null!=(o=g[h])&&o.apply(g,i)):new b(d,c[0]);return this},a.fn.iOSCheckbox=function(b){var c;return null==b&&(b={}),c=a.extend({},b,{resizeHandle:!1,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer",containerWidth:80,labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"}),this.iphoneStyle(c)}}).call(this)}(jQuery);